import{c as a,o as n,a as t,F as y,b as $,t as l,r as k,g as w,h as g,w as x,i as q,e as f,v as O,j as V,k as C}from"./index-5bpJjpLm.js";const S={class:"col-md-4"},U={class:"list-group"},j=["onClick"],D={class:"d-flex w-100 justify-content-between"},E={class:"mb-1"},T={class:"mb-1"},B={__name:"ProductList",props:["data","addCart"],setup(c){return(v,r)=>(n(),a("div",S,[t("div",U,[(n(!0),a(y,null,$(c.data,e=>(n(),a("a",{href:"#",class:"list-group-item list-group-item-action",key:e.id,onClick:i=>c.addCart(e)},[t("div",D,[t("h5",E,l(e.name),1),t("small",null,"$"+l(e.price),1)]),t("p",T,l(e.description),1)],8,j))),128))])]))}},I={class:"col-md-8"},M={class:"table"},N=["onClick"],F=["onUpdate:modelValue","onChange"],L=["value"],Q={key:0,class:"alert alert-primary text-center",role:"alert"},R={key:1},A={class:"text-end mb-3"},P={class:"text-end"},W={__name:"CartCard",props:{cart:Array,remark:String,order:Object},emits:["update:cart","update:remark","deleteItem","createOrder","resetCart"],setup(c,{emit:v}){const r=c,e=v,i=s=>{r.cart.forEach((o,d)=>{o.id===s&&(r.cart.splice(d,1),e("update:cart",r.cart),e("deleteItem",s))})},h=s=>{r.cart.forEach(o=>{o.id===s.id&&(o.quantity=parseInt(s.quantity),e("update:cart",r.cart))})},_=k(r.remark);w(_,s=>{e("update:remark",s)});const b=s=>s.price*s.quantity,u=g(()=>{let s=0;return r.cart.forEach(o=>{s+=o.price*o.quantity}),s}),p=()=>{const s={id:new Date().getTime(),cart:[...r.cart],remark:_.value,total:u.value};r.cart.splice(0),_.value="",e("createOrder",s),e("resetCart")};return(s,o)=>(n(),a("div",I,[t("table",M,[o[1]||(o[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col",width:"50"},"操作"),t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"描述"),t("th",{scope:"col",width:"90"},"數量"),t("th",{scope:"col"},"單價"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[(n(!0),a(y,null,$(r.cart,d=>(n(),a("tr",{key:d.id},[t("td",null,[t("button",{type:"button",class:"btn btn-sm",onClick:m=>i(d.id)}," x ",8,N)]),t("td",null,l(d.name),1),t("td",null,[t("small",null,l(d.description),1)]),t("td",null,[x(t("select",{class:"form-select","onUpdate:modelValue":m=>d.quantity=m,onChange:m=>h(d)},[(n(),a(y,null,$(10,m=>t("option",{key:m,value:m},l(m),9,L)),64))],40,F),[[q,d.quantity]])]),t("td",null,l(d.price),1),t("td",null,l(b(d)),1)]))),128))])]),r.cart.length===0?(n(),a("div",Q," 請選擇商品 ")):(n(),a("div",R,[t("div",A,[t("h5",null,[o[2]||(o[2]=f("總計: ",-1)),t("span",null,"$"+l(u.value),1)])]),x(t("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註","onUpdate:modelValue":o[0]||(o[0]=d=>_.value=d)},null,512),[[O,_.value]]),t("div",P,[t("button",{class:"btn btn-primary",onClick:V(p,["prevent"])},"送出")])]))]))}},z={class:"row justify-content-center"},G={class:"col-8"},H={key:0,class:"alert alert-dark text-center",role:"alert"},J={key:1,class:"card"},K={class:"card-body"},X={class:"card-title"},Y={class:"table"},Z={class:"text-end"},tt={class:"text-end"},et={__name:"OrderCard",props:["order"],setup(c){const v=r=>r.price*r.quantity;return(r,e)=>(n(),a("div",z,[t("div",G,[c.order.id?(n(),a("div",J,[t("div",K,[t("div",X,[e[3]||(e[3]=t("h5",null,"訂單",-1)),t("table",Y,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"數量"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[(n(!0),a(y,null,$(c.order.cart,i=>(n(),a("tr",{key:i.id},[t("td",null,l(i.name),1),t("td",null,l(i.quantity),1),t("td",null,l(v(i)),1)]))),128))])]),t("div",Z,[e[1]||(e[1]=f("備註: ",-1)),t("span",null,l(c.order.remark),1)]),t("div",tt,[t("h5",null,[e[2]||(e[2]=f("總計: ",-1)),t("span",null,"$"+l(c.order.total),1)])])])])])):(n(),a("div",H," 尚未建立訂單 "))])]))}},rt={id:"root"},st={class:"container mt-5"},at={class:"row"},ot={__name:"Week3View",setup(c){const v=[{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}],r=k([]),e=u=>{r.value.push({id:new Date().getTime(),name:u.name,description:u.description,price:u.price,quantity:1})},i=k(""),h=k({}),_=u=>{h.value=u},b=()=>{r.value=[]};return(u,p)=>(n(),a("div",rt,[t("div",st,[t("div",at,[C(B,{data:v,"add-cart":e}),C(W,{cart:r.value,order:h.value,remark:i.value,"onUpdate:remark":p[0]||(p[0]=s=>i.value=s),"onUpdate:cart":p[1]||(p[1]=s=>r.value.value=s),onCreateOrder:_,onResetCart:b},null,8,["cart","order","remark"])]),p[2]||(p[2]=t("hr",null,null,-1)),C(et,{order:h.value},null,8,["order"])])]))}};export{ot as default};
